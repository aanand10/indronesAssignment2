<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
        integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
    <!-- <leaflet-routing-machine css  -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        .infoBox {
            height: 4rem;
            overflow-y: scroll;
        }
    </style>
</head>

<body>
    <div class="infoBox">
        <ul id="logandlat">

        </ul>
    </div>
    <div id="map" style="width:100%; height: 80vh;"></div>
</body>

<!-- leaflet cdn  -->
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
<!-- leaflet-routing-machine.js cdn -->
<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>

<script>

    // selecting element  
    var t = document.getElementById("logandlat");

    // leaflet map with layer 
    var map = L.map('map').setView([18.912471538927843, 73.32785114126712], 13);

    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    // marker
    let marker = L.marker([18.912471538927843, 73.32785114126712]).addTo(map)
        .bindPopup('marker 1')
        .openPopup();
    // let marker2 = L.marker([18.912471538927843, 73.2785114126712]).addTo(map)
    //     .bindPopup('marker 2')
    //     .openPopup();


    // map click event 
    map.on('click', function (e) {
        console.log(e);
        // let marker2 = L.marker([e.latlng.lat, e.latlng.lng]).addTo(map);  // will add marker
        // routing machine
        console.log(marker);
        L.Routing.control({
            waypoints: [
                L.latLng([18.912471538927843, 73.32785114126712]),
                L.latLng(e.latlng.lat, e.latlng.lng),
            ]
        }).on('routesfound', function (e) {
            console.log(e.routes[0].coordinates);
            console.log(typeof e);
            // selecting the best route which is 0 at index
            e.routes[0].coordinates.forEach(function (coord, index) {
                setTimeout(() => {
                    marker.setLatLng([coord.lat, coord.lng])
                    // var y = document.createElement('li');
                    var y = document.createElement('li');
                    y.textContent = ((['lat :' + coord.lat, 'lng: ' + coord.lng]));

                    t.appendChild(y);

                    // alert('Showing route between waypoints:\n' + JSON.stringify([coord.lat, coord.lng], null, 2));
                    // console.log([coord.lat, coord.lng])
                    // console.log(index);
                }, 100 * index)
            }

            )

        })
            .addTo(map);
    })


</script>

</html>